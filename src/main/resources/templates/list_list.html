
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layouts/basic">
<link rel="stylesheet" th:href="@{/templates.css/main.css}" />
<head>
<title>Getting Started: Serving Web Content</title>
<title>Shopping Lists</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style>
table, th, td { {
	border: 1px solid black;
	border-collapse: collapse;
	padding: 15px;
}

input[type=checkbox]:checked+label.strikethrough {
	text-decoration: line-through;
}

.strikethrough:checked+.strikeThis {
	text-decoration: line-through
}

#list {
	margin: 10px 5px;
}

#list div {
	margin-bottom: 5px;
}

#list button {
	margin-top: 5px;
}

input[type=text] {
	padding: .5em .6em;
	display: inline-block;
	border: 1px solid #ccc;
	box-shadow: inset 0 1px 3px #ddd;
	border-radius: 4px;
}

/* TEST CODE */
#checkbox-container {
	margin: 10px 5px;
}

#checkbox-container div {
	margin-bottom: 5px;
}

#checkbox-container button {
	margin-top: 5px;
}

input[type=text] {
	padding: .5em .6em;
	display: inline-block;
	border: 1px solid #ccc;
	box-shadow: inset 0 1px 3px #ddd;
	border-radius: 4px;
}
</style>
<!-- check box code by Sydney Haggard -->
<script type="text/javascript" th:inline="javascript">

var checkboxValues = {};
$(":checkbox").each(function(){
  checkboxValues[this.id] = this.checked;
<!--/* TEST CODE */
/* <![CDATA[ */-->
var checkboxValues = JSON.parse(localStorage.getItem('checkboxValues')) || {},
    $checkboxes = $("#checkbox-container :checkbox");

$checkboxes.on("change", function(){
  $checkboxes.each(function(){
    checkboxValues[this.id] = this.checked;
  });
  
  localStorage.setItem("checkboxValues", JSON.stringify(checkboxValues));
});
$.cookie('checkboxValues', checkboxValues, { expires: 7, path: '/' })

function repopulateCheckboxes(){
  var checkboxValues = $.cookie('checkboxValues');
  if(checkboxValues){
    Object.keys(checkboxValues).forEach(function(element) {
      var checked = checkboxValues[element];
      $("#" + element).prop('checked', checked);
    });
  }
}

<!--// On page load-->
$.each(checkboxValues, function(key, value) {
  $("#" + key).prop('checked', value);
});
<!--/*]]>*/-->
</script>
</head>
<body layout:fragment="content">
	<div class="row">
		<div id="checkbox-container">
			<h1>List Items</h1>
<!--button to add items check with controller listItemAdd  by: Anthony Holt-->
		<a href="/" th:href="@{|/ListsofLists/${id}/add|}"><button
					type="button" class="btn btn-success">Add item</button></a>
			<table class="table table-striped" id="checkbox-container">
				<thead>
					<tr>
						<th>Name</th>
						<th>&nbsp;</th>
					</tr>
				</thead>
				<tbody id="checkbox-container">
					<tr th:each="listItem : ${list_items}" id="checkbox-container">

						<td><input type="checkbox" name="check" class="strikethrough"
							value="1" /><label for="check" class="strikeThis"
							th:text="${listItem.contents}" onclick="saveCheckbox()"> </label></td>
						<td><form method="POST">
								<input type="hidden" name="id" th:value="${listItem.id}" />
								<button type="submit">Delete</button>
							</form></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>

</body>
</html>
